\section{Requirements} \label{sec:reqs}

In this section we give an overview of requirements on \gls{DM} software product releases from the different stakeholders.

It is important to identify the correct release policy during construction phase, in order to have it consolidated when operations starts.

In operations, some of the \gls{LSST} subsystems may no longer exist, for example \gls{DM} will not exist per se in operations but \gls{DM} software products, will still exist under other managerial structure.
The policy defined here will still be applicable, since many of the stakeholders will still expect software releases to be managed in the same manner as during construction.


\subsection{Rease General Requirements} \label{sec:genreq}

All software releases shall be properly documented with a software release note as per definition in \ref{sec:defrelease} and tested before making them available for operations.


\subsection{Release Requirements for the \gls{LSST} Science Community} \label{sec:comreqs}

In preparation for working with the \gls{LSST} data products and software during operations, several \gls{LSST} science collaborations have begun using the \gls{DM} software to run data challenges using precursor data or simulations, and to do performance studies. These activities effectively increase the number of beta-testers of \gls{DM} software products, providing valuable feedback to \gls{DM} on the state of the system. 

In order to work effectively with the \gls{DM} software while it is still under development, the science community require: 
\begin{itemize}
\item stable public APIs and schemas in order to build software for User-Generated analyses, 
\item timely access new functionality,  
\item patches and bug fixes back-ported to the current stable version of the software. 
\end{itemize}

Back-porting bug fixes to the current stable version of the software will entail extra work for \gls{DM}. 
As not all bug fixes are needed by the science community, a process by which essential bug fixes only are back-ported to the current stable version should be adopted. 
New functionality often necessitates new or modified APIs or schemas. 
In such cases, a mechanism for deprecation should be adopted to allow the user community to adapt their codes on an appropriate timescale.  

The \gls{DM} Science Team will liaise with the \gls{LSST} science community to understand their needs concerning \gls{DM} software product releases. 
Requests for new functionality or back-ported bug fixes to include in forthcoming \gls{DM} software product releases will be communicated to \gls{DM} via a \gls{RFC}, coordinated either by the DM-SST liaison to the science collaboration or a nominated person within the science collaboration who will coordinate requests and raise an \gls{RFC}. 


\subsection{Release Requirements for Data Processing in Operations} \label{sec:procreqs}

%The Science Operations Department will be in charge of  data processing in operations. 
%Software for the various pipelines will be hosted at \gls{NCSA},IN2P3 and in Chile.

The \gls{LDF} will be responsible for generating the necessary data products during commissioning and operations. 
The \gls{LDF} requires officially released software to be used in production for the various operational activities.
Software releases will be run in production at National Center for Supercomputing Applications (\gls{NCSA}), CC-IN2P3 and in Chile, and possibly at independent Data Access Centers (iDACs).

Release frequencies will depend on the processing type:
\begin{itemize}
\item prompt processing requires releases to be available very quick, that could happen on a daily bases, especially in the early days (official releases)
 or a  patch release  for a specific problem may be required during the night (this would require sign off from the \gls{AD} for Science Operations).
\item \gls{DRP} processing  must be stable for long periods, currently processing is foreseen to take 9 months.  Before such a long processing run the release must be very well tested and any updates extremely well controlled.
\item Image acquisition and header service, which form part of the image acquisition on the mountain will also need strict change control. Releases for this could be on monthly or even lounge timescales - however if there is a problem a patch will be needed immediately.
\end{itemize}

\textit{In order to properly set-up the release process, the \gls{SW} products to operate need to be well identified}

Patch releases need to be provided with a frequency that depends on the type of processing
and on the urgency of the problems to be fixed.


\subsection{Release Requirements for \gls{LSST} Subsystems in Operations.} \label{sec:otherreqs}

Other \gls{LSST} subsystem may be consumers of \gls{DM} software products, for example the Telescope \& Site subsystem software makes use of the \gls{DM} software products as dependencies. 
In order for \gls{DM} to be able to respond correctly to the needs of other \gls{LSST} subsystems, it is important to first identify which \gls{DM} software products are used, and how they are used.


\subsection{Release Requirements for Infrastructural Software} \label{sec:infreqs}

A significant subset of \gls{DM} software products are used to provide services to \gls{LSST} science users and staff but are not directly used to generate \gls{LSST} science data products. An example of this is the software that implements the \gls{LSST} Science Platform (\gls{LSP}).

Releases of this type of software are typically on their own cadence and need to be adequately tested before deployment to ensure a stable infrastructure. The releases may be tied to processing milestones if the services or features thereof are required for the processing (e.g. functionality of the workflow service may be required for Data Release processing and features in the \gls{LSP} may be needed for \gls{QA} of data products).

Patch releases may need to be provided depending on the urgency and severity of the problems to be fixed.


\subsection{Release Requirements for non-Operational Project Activities} \label{sec:nonopsreqs}

This includes activities done in preparation for operations, such as commissioning, 
large scale integration/validation test campaigns, etc. These activities should use use,  as much as possible,  officially released software.

In some cases however, it is necessary to use non-released software, such as release candidates or stable builds.
In all cases, the software used must be clearly identified (Github revision at least), and the distribution/deployment strictly controlled.


\subsection{Assessment} \label{sec:assessment}

As a first glance, it seems that major releases need to be done more on a feature or milestone basis.

However before concluding, further evaluation is needed.
First of all, a unique list of requirements should be derived from the above subsections. 
Then, it should be possible to identify which of these requirements are applicable for each software product listed in appendix \ref{sec:swptree}.
This extra information shall be included in MagicDraw and documented in \citeds{DMTN-104}, which still draft.


